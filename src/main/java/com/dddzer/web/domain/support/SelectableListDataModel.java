/*
 * (c) Copyright 2005-2013 JAXIO, http://www.jaxio.com
 * Source code generated by Celerio, a Jaxio product
 * Want to use Celerio within your company? email us at info@jaxio.com
 * Follow us on twitter: @springfuse
 * Template pack-jsf2-spring-conversation:src/main/java/domain/support/SelectableListDataModel.p.vm.java
 */
package com.dddzer.web.domain.support;

import java.io.Serializable;
import java.util.List;
import javax.faces.model.ListDataModel;

import org.primefaces.model.SelectableDataModel;
import com.dddzer.domain.Identifiable;

public class SelectableListDataModel<E extends Identifiable<?>> extends ListDataModel<E> implements SelectableDataModel<E>, Serializable {
    private static final long serialVersionUID = 1L;
    private E selectedRow;

    public SelectableListDataModel() {
    }

    public SelectableListDataModel(List<E> data) {
        super(data);
    }

    /**
     * Returns the currently selected row. To be called from your flow upon a "selectXxx" transition.
     */
    public E getSelectedRow() {
        return selectedRow;
    }

    /**
     * Set the currently selected row. To be called from your dataTable.
     */
    public void setSelectedRow(E selectedRow) {
        this.selectedRow = selectedRow;
    }

    /**
     * Set the selectedRow to null. To be called from your flow.
     */
    public void resetSelectedRow() {
        this.selectedRow = null;
    }

    @SuppressWarnings("unchecked")
    @Override
    public E getRowData(String rowKey) {
        List<E> items = (List<E>) getWrappedData();

        for (E item : items) {
            if (rowKey.equals("" + item.hashCode())) {
                return item;
            }
        }

        return null;
    }

    @Override
    public Object getRowKey(E item) {
        return "" + item.hashCode();
    }
}
